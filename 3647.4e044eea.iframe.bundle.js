(globalThis.webpackChunkng_monaco_editor=globalThis.webpackChunkng_monaco_editor||[]).push([[3647],{"./src/public-api.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{nm:()=>MonacoEditorModule});var asyncToGenerator=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),BehaviorSubject=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js");let MonacoEditorConfig=class MonacoEditorConfig{baseUrl;dynamicImport;defaultOptions;autoLayoutInterval};MonacoEditorConfig=(0,tslib_es6.gn)([(0,core.Injectable)({providedIn:"root"})],MonacoEditorConfig);let MonacoProviderService=class MonacoProviderService{monacoEditorConfig;_theme;_monaco;_loadingPromise;theme$$=new BehaviorSubject.X(this.theme);theme$=this.theme$$.asObservable();get themes(){return["vs","vs-dark"]}get theme(){return this._theme}get monaco(){return this._monaco||window.monaco}get require(){return window.require}constructor(monacoEditorConfig){this.monacoEditorConfig=monacoEditorConfig,this._theme=this.monacoEditorConfig.defaultOptions?.theme??this.themes[0]}initMonaco(){var _this=this;return(0,asyncToGenerator.Z)((function*(){return _this._loadingPromise||(_this._loadingPromise=_this.loadMonaco())}))()}loadModule(deps){return new Promise((resolve=>this.require(deps,resolve)))}toggleTheme(){this.changeTheme(this.themes.find((theme=>theme!==this.theme)))}changeTheme(theme){this.assertMonaco(),this._theme=theme,this.monaco.editor.setTheme(theme),this.theme$$.next(this.theme)}getEditorOptions(options){return{...this.monacoEditorConfig.defaultOptions,theme:this.theme,...options}}create(domElement,options){return this.assertMonaco(),this.monaco.editor.create(domElement,this.getEditorOptions(options))}createDiffEditor(domElement,options){return this.assertMonaco(),this.monaco.editor.createDiffEditor(domElement,{renderSideBySide:!1,enableSplitViewResizing:!1,...this.getEditorOptions(options)})}colorizeElement(domElement,options){return this.assertMonaco(),this.monaco.editor.colorizeElement(domElement,{theme:this.theme,...options})}getLanguageExtensionPoint(alias){return this.assertMonaco(),this.monaco.languages.getLanguages().find((({aliases,id})=>aliases?.includes(alias)||id===alias))}configAmdLoader(baseUrl){return new Promise(((resolve,reject)=>{if(this.monaco&&this.require)return resolve();const loaderScript=document.createElement("script");loaderScript.type="text/javascript",loaderScript.src=[this.monacoEditorConfig.baseUrl,"vs/loader.js"].filter((_=>!!_)).join("/"),loaderScript.addEventListener("load",(()=>{this.require.config({baseUrl,paths:{vs:"vs"}}),resolve()})),loaderScript.addEventListener("error",reject),document.body.append(loaderScript)}))}assertMonaco(){if(!this.monaco)throw new Error("`monaco` has not been initialized, please call `initMonaco()` first")}loadMonaco(){var _this2=this;return(0,asyncToGenerator.Z)((function*(){if(_this2.monacoEditorConfig.dynamicImport)return _this2.monacoEditorConfig.dynamicImport().then((monaco=>_this2._monaco=monaco));if(null!=_this2.monacoEditorConfig.baseUrl)return yield _this2.configAmdLoader(_this2.monacoEditorConfig.baseUrl),_this2.loadModule(["vs/editor/editor.main"]).then((monaco=>_this2._monaco=monaco));if(!window.monaco)throw new Error("No `monaco` found on `window`");return window.monaco}))()}static ctorParameters=()=>[{type:MonacoEditorConfig}]};MonacoProviderService=(0,tslib_es6.gn)([(0,core.Injectable)({providedIn:"root"})],MonacoProviderService);let CodeColorizeDirective=class CodeColorizeDirective{element;monacoProvider;ngCodeColorize;ngCodeColorizeOptions;originalDisplay;lastContent;destroyed=!1;constructor(element,monacoProvider){this.element=element,this.monacoProvider=monacoProvider}ngOnInit(){const el=this.element.nativeElement;this.originalDisplay=el.style.display,el.style.display="none"}ngAfterContentChecked(){const el=this.element.nativeElement;this.lastContent!==el.innerHTML&&(this.lastContent=el.innerHTML,this.doColorize())}ngOnDestroy(){this.destroyed=!0}doColorize(){var _this=this;return(0,asyncToGenerator.Z)((function*(){if(_this.destroyed)return;const el=_this.element.nativeElement,siblingEl=el.nextElementSibling,useSiblingEl=siblingEl?.dataset.ngCodeColorizeCloned,nextEl=useSiblingEl?siblingEl:el.cloneNode(!0);useSiblingEl?(nextEl.innerHTML=el.innerHTML,nextEl.className=nextEl.className.split(" ").filter((_=>"vs"!==_)).join("").trim()):(nextEl.style.display=_this.originalDisplay,nextEl.dataset.ngCodeColorizeCloned="true",el.parentNode.insertBefore(nextEl,el.nextSibling)),nextEl.dataset.lang=_this.ngCodeColorize,yield _this.monacoProvider.initMonaco(),yield _this.monacoProvider.colorizeElement(nextEl,_this.ngCodeColorizeOptions)}))()}static ctorParameters=()=>[{type:core.ElementRef},{type:MonacoProviderService}];static propDecorators={ngCodeColorize:[{type:core.Input}],ngCodeColorizeOptions:[{type:core.Input}]}};CodeColorizeDirective=(0,tslib_es6.gn)([(0,core.Directive)({selector:"[ngCodeColorize]"})],CodeColorizeDirective);var common=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs"),fesm2022_forms=__webpack_require__("./node_modules/@angular/forms/fesm2022/forms.mjs");const monaco_editor_componentngResource_namespaceObject='<div\n  class="ng-monaco-editor-container"\n  #monacoContainer\n>\n  \x3c!-- Show a spinner if monaco-editor library is not yet ready --\x3e\n  <div\n    *ngIf="!monacoLoaded"\n    class="ng-monaco-editor-spinner"\n  >\n    <div class="ng-monaco-editor-spinner__double-bounce1"></div>\n    <div class="ng-monaco-editor-spinner__double-bounce2"></div>\n  </div>\n\n  <div\n    class="ng-monaco-editor-container__monaco-anchor"\n    #monacoAnchor\n  ></div>\n</div>\n';var monaco_editor_componentngResource=__webpack_require__("./src/monaco-editor.component.scss?ngResource"),monaco_editor_componentngResource_default=__webpack_require__.n(monaco_editor_componentngResource),debounce=__webpack_require__("./node_modules/lodash-es/debounce.js"),isEqual=__webpack_require__("./node_modules/lodash-es/isEqual.js"),Subject=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/Subject.js"),takeUntil=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/takeUntil.js"),Observable=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/Observable.js");let MonacoCommonEditorComponent=class MonacoCommonEditorComponent{monacoEditorConfig;monacoProvider;cdr;options;modelUri;editorChange=new core.EventEmitter;editorBlur=new core.EventEmitter;modelId;monacoContainer;monacoAnchor;_rootEditor;get rootEditor(){return this._rootEditor??this.editor}set rootEditor(editor){this._rootEditor=editor}editor;model;_monacoLoaded=!1;get monacoLoaded(){return this._monacoLoaded}_destroyed=!1;get destroyed(){return this._destroyed}destroy$$=new Subject.x;get value(){return this._value}_value="";_prevOptions;_disposables=[];constructor(monacoEditorConfig,monacoProvider,cdr){this.monacoEditorConfig=monacoEditorConfig,this.monacoProvider=monacoProvider,this.cdr=cdr}ngOnInit(){this.resetEditor()}ngAfterViewInit(){const layoutInterval=this.monacoEditorConfig.autoLayoutInterval??100;var target,options;layoutInterval&&(target=this.monacoContainer.nativeElement,new Observable.y((observer=>{const resizeObserver=new ResizeObserver((entries=>{for(const entry of entries)observer.next(entry.target)}));return resizeObserver.observe(target,options),()=>{resizeObserver.unobserve(target),resizeObserver.disconnect()}}))).pipe((0,takeUntil.R)(this.destroy$$)).subscribe((0,debounce.Z)((()=>{this.editor&&this.editor.layout()}),layoutInterval))}ngOnChanges({modelUri,options}){if(modelUri&&!modelUri.isFirstChange()&&this.resetEditor(),options){const currOptions=options.currentValue;this._prevOptions&&!(0,isEqual.Z)(this._prevOptions,currOptions)&&this.rootEditor.updateOptions(currOptions),this._prevOptions=currOptions}}ngOnDestroy(){this.dispose(),this._destroyed=!0}dispose(){this.rootEditor?.dispose(),this.model&&!this.model.isDisposed()&&this.model.dispose(),this._disposables.forEach((disposable=>disposable.dispose())),this.rootEditor=this.editor=null,this.model=null,this._disposables=[]}onChange=_=>{};onTouched=()=>{};writeValue(value){this._value=value||"",this.editor&&this.model.setValue(this._value)}registerOnChange(fn){this.onChange=fn}registerOnTouched(fn){this.onTouched=fn}createModel(value,uri){const{monaco}=this.monacoProvider,modelUri=uri?monaco.Uri.parse(uri):void 0,model=modelUri&&monaco.editor.getModel(modelUri);return model?.dispose(),monaco.editor.createModel(value,this.options.language,modelUri)}resetEditor(){var _this=this;return(0,asyncToGenerator.Z)((function*(){_this.monacoLoaded?_this.dispose():(yield _this.monacoProvider.initMonaco(),_this._monacoLoaded=!0),_this.destroyed||(_this.editor=_this.createEditor(),_this.listenModelChanges(),_this.editorChange.emit(_this.editor),_this.modelId=_this.model.id,_this.cdr.markForCheck())}))()}listenModelChanges(){const editor=this.editor,model=this.model;this._disposables=[model.onDidChangeContent((()=>{const value=model.getValue();this._value!==value&&(this.onChange(value),this._value=value,this.cdr.markForCheck())})),editor.onDidChangeModel((()=>{this.cdr.markForCheck()})),editor.onDidBlurEditorWidget((()=>{this.onTouched(),this.editorBlur.emit()}))]}static ctorParameters=()=>[{type:MonacoEditorConfig},{type:MonacoProviderService},{type:core.ChangeDetectorRef}];static propDecorators={options:[{type:core.Input}],modelUri:[{type:core.Input}],editorChange:[{type:core.Output}],editorBlur:[{type:core.Output}],modelId:[{type:core.HostBinding,args:["attr.model-id"]}],monacoContainer:[{type:core.ViewChild,args:["monacoContainer",{static:!0}]}],monacoAnchor:[{type:core.ViewChild,args:["monacoAnchor",{static:!0}]}]}};var MonacoDiffEditorComponent_1;MonacoCommonEditorComponent=(0,tslib_es6.gn)([(0,core.Directive)()],MonacoCommonEditorComponent);let MonacoDiffEditorComponent=class MonacoDiffEditorComponent extends MonacoCommonEditorComponent{static#_=MonacoDiffEditorComponent_1=this;originalValue;originalModel;createEditor(){this.originalModel=this.createModel(this.originalValue),this.model=this.createModel(this.value,this.modelUri);const editor=this.monacoProvider.createDiffEditor(this.monacoAnchor.nativeElement,this.options);return this.rootEditor=editor,editor.setModel({original:this.originalModel,modified:this.model}),editor.getModifiedEditor()}ngOnChanges(changes){super.ngOnChanges(changes),changes.originalValue&&this.originalModel?.setValue(changes.originalValue.currentValue)}ngOnDestroy(){super.ngOnDestroy(),this.originalModel?.dispose()}static propDecorators={originalValue:[{type:core.Input}]}};var MonacoEditorComponent_1;MonacoDiffEditorComponent=MonacoDiffEditorComponent_1=(0,tslib_es6.gn)([(0,core.Component)({selector:"ng-monaco-diff-editor",template:monaco_editor_componentngResource_namespaceObject,encapsulation:core.ViewEncapsulation.None,changeDetection:core.ChangeDetectionStrategy.OnPush,preserveWhitespaces:!1,providers:[{provide:fesm2022_forms.JU,useExisting:(0,core.forwardRef)((()=>MonacoDiffEditorComponent_1)),multi:!0}],styles:[monaco_editor_componentngResource_default()]})],MonacoDiffEditorComponent);let MonacoEditorComponent=MonacoEditorComponent_1=class MonacoEditorComponent extends MonacoCommonEditorComponent{createEditor(){return this.model=this.createModel(this.value,this.modelUri),this.monacoProvider.create(this.monacoAnchor.nativeElement,{...this.options,model:this.model})}};var MonacoEditorModule_1;MonacoEditorComponent=MonacoEditorComponent_1=(0,tslib_es6.gn)([(0,core.Component)({selector:"ng-monaco-editor",template:monaco_editor_componentngResource_namespaceObject,encapsulation:core.ViewEncapsulation.None,changeDetection:core.ChangeDetectionStrategy.OnPush,preserveWhitespaces:!1,providers:[{provide:fesm2022_forms.JU,useExisting:(0,core.forwardRef)((()=>MonacoEditorComponent_1)),multi:!0}],styles:[monaco_editor_componentngResource_default()]})],MonacoEditorComponent);const EXPORTABLES=[MonacoEditorComponent,MonacoDiffEditorComponent,CodeColorizeDirective];const MONACO_PROVIDER={provide:MonacoProviderService,deps:[[new core.Optional,new core.SkipSelf,MonacoProviderService],MonacoEditorConfig],useFactory:function MonacoProviderFactory(parent,monacoEditorConfig){return parent||new MonacoProviderService(monacoEditorConfig)}};let MonacoEditorModule=MonacoEditorModule_1=class MonacoEditorModule{static forRoot(config={}){return{ngModule:MonacoEditorModule_1,providers:[{provide:MonacoEditorConfig,useValue:config}]}}};MonacoEditorModule=MonacoEditorModule_1=(0,tslib_es6.gn)([(0,core.NgModule)({imports:[common.CommonModule,fesm2022_forms.u5,fesm2022_forms.UX],declarations:EXPORTABLES,exports:EXPORTABLES,providers:[MONACO_PROVIDER]})],MonacoEditorModule)},"./stories/base.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{E:()=>getStories});var _angular_common__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs"),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),_angular_forms__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@angular/forms/fesm2022/forms.mjs"),_storybook_angular__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@storybook/angular/dist/index.mjs");const exampleCode='apiVersion: v1\nkind: Pod\nmetadata:\n  name: frontend\nspec:\n  containers:\n  - name: db\n    image: mysql\n    env:\n    - name: MYSQL_ROOT_PASSWORD\n      value: "password"\n    resources:\n      requests:\n        memory: "64Mi"\n        cpu: "250m"\n      limits:\n        memory: "128Mi"\n        cpu: "500m"\n  - name: wp\n    image: wordpress\n    resources:\n      requests:\n        memory: "64Mi"\n        cpu: "250m"\n      limits:\n        memory: "128Mi"\n        cpu: "500m"\n',getStories=RootModule=>({meta:{decorators:[(0,_storybook_angular__WEBPACK_IMPORTED_MODULE_0__.applicationConfig)({providers:[(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.importProvidersFrom)([RootModule])]}),(0,_storybook_angular__WEBPACK_IMPORTED_MODULE_0__.moduleMetadata)({imports:[_angular_common__WEBPACK_IMPORTED_MODULE_2__.CommonModule,_angular_forms__WEBPACK_IMPORTED_MODULE_3__.u5,RootModule]})]},MonacoEditor:{args:{model:exampleCode,options:{folding:!0,minimap:{enabled:!1},readOnly:!1,language:"yaml"}},render:args=>({props:args,template:'\n        <h1>Raw</h1>\n        <textarea\n          cols="80"\n          rows="10"\n          [(ngModel)]="model"\n        ></textarea>\n        <h1>ng-monaco-editor</h1>\n        <ng-monaco-editor\n          style="height: 300px"\n          modelUri="file:text.yaml"\n          [options]="options"\n          [(ngModel)]="model"\n        ></ng-monaco-editor>\n      '})},MonacoDiffEditor:{args:{model:exampleCode,originalModel:exampleCode,options:{folding:!0,minimap:{enabled:!1},readOnly:!1}},render:args=>({props:args,template:'\n        <h1>Raw</h1>\n        <textarea\n          cols="80"\n          rows="10"\n          [(ngModel)]="model"\n        ></textarea>\n        <h1>ng-monaco-diff-editor</h1>\n        <ng-monaco-diff-editor\n          style="height: 300px"\n          modelUri="file:text.yaml"\n          [originalValue]="originalModel"\n          [options]="options"\n          [(ngModel)]="model"\n        ></ng-monaco-diff-editor>\n      '})},ColorizeCode:{args:{code:exampleCode},render:args=>({props:args,template:'\n        <pre\n          style="font-family: Consolas, \'Courier New\', monospace;"\n        ><code ngCodeColorize="yaml">{{ code }}</code></pre>\n      '})}})},"./src/monaco-editor.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,"ng-monaco-editor,\nng-monaco-diff-editor {\n  display: block;\n}\n\n.ng-monaco-editor-container {\n  height: 100%;\n}\n.ng-monaco-editor-container__monaco-anchor {\n  width: 100%;\n  height: 100%;\n}\n.ng-monaco-editor-container__monaco-anchor .monaco-diff-editor,\n.ng-monaco-editor-container__monaco-anchor .monaco-editor {\n  flex: 1;\n}\n.ng-monaco-editor-container, .ng-monaco-editor-container__monaco-anchor {\n  flex: 1;\n  display: flex;\n  flex-flow: column;\n}\n\n/* Loading spinner for code editor */\n.ng-monaco-editor-spinner {\n  width: 40px;\n  height: 40px;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n}\n.ng-monaco-editor-spinner__double-bounce1, .ng-monaco-editor-spinner__double-bounce2 {\n  width: 100%;\n  height: 100%;\n  border-radius: 50%;\n  background-color: #333;\n  opacity: 0.6;\n  position: absolute;\n  top: 0;\n  left: 0;\n  animation: sk-bounce 2s infinite ease-in-out;\n}\n.ng-monaco-editor-spinner__double-bounce2 {\n  animation-delay: -1s;\n}\n@keyframes sk-bounce {\n  0%, 100% {\n    transform: scale(0);\n  }\n  50% {\n    transform: scale(1);\n  }\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()}}]);